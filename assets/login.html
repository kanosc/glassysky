<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.108.0">
    <title>Cloud File System</title>

    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/5.1.1/css/bootstrap.min.css">
    <!-- Custom styles for this template -->
    <link href="../assets/sign-in.css" rel="stylesheet">
  </head>
<body class="text-center bg-dark">
    
<main class="form-signin w-100 m-auto">
  <form action="/{{ .action }}" method="post" enctype="multipart/form-data">
    <img class="mb-4" src="../assets/logo.svg" alt="" width="72" height="57">
    <h1 class="h3 mb-3 fw-normal text-white">云盘登录</h1>

    <div class="form-floating">
      <input type="text" name="username" class="form-control" id="floatingInput" placeholder="Username">
      <label for="floatingInput">Username</label>
    </div>
    <div class="form-floating">
      <input type="password" name="password" class="form-control" id="floatingPassword" placeholder="Password">
      <label for="floatingPassword">Password</label>
    </div>

    <div class="checkbox mb-3 text-white">
      <label>
        <input type="checkbox" value="remember-me"> Remember me
      </label>
    </div>
    <button class="w-100 btn btn-lg btn-primary" type="submit">登录</button>
    <p class="mt-5 mb-3 text-muted">&copy; 2023–2028</p>
  </form>
</main>
<script>
  (function(){
    // 获取HTML中的表单元素和提交按钮元素
    var form = document.querySelector('form');
    var submitBtn = document.querySelector('button[type="submit"]');

// 监听提交按钮的点击事件
    submitBtn.addEventListener('click', function(e) {
      e.preventDefault(); // 阻止默认的表单提交行为

      // 创建XMLHttpRequest对象
      var xhr = new XMLHttpRequest();

      // 监听XMLHttpRequest对象的readystatechange事件
      xhr.onreadystatechange = function() {
        if (xhr.readyState === 4) {
          if (xhr.status === 200) {
            // 成功接收到响应，打印出响应内容并将响应的 HTML 页面显示在页面上
            console.log(xhr.responseText);
			window.location.href="/download_list";
            // var responseHTML = xhr.responseText;
            // document.write(responseHTML);
          } else {
            // 请求失败，弹出对话框提示
            alert(xhr.responseText);
          }
        }
      };

      // 准备需要发送的数据
      var formData = new FormData(form);

      // 发送POST请求
      xhr.open('POST', form.action);
      xhr.send(formData);
    });
  }());
</script>
    
</body>
</html>
